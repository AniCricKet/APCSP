<article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Fastpages local server</h1><p class="page-description">Serving Fastpages locally using Docker.  This allows local machine testing of each change of code without the delay of GitHub Actions.</p><p class="post-meta post-meta-title"><time class="dt-published" datetime="2022-09-12T00:00:00-05:00" itemprop="datePublished">
        Sep 12, 2022
      </time>• 
          <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <span class="p-author h-card" itemprop="name">Ellen Xu</span></span>
       • <span class="read-time" title="Estimated read time">
    
    
      3 min read
    
</span></p>

    
      <p class="category-tags"><i class="fas fa-tags category-tags-icon"></i></i> 
      
          <a class="category-tags-link" href="/APCSP/categories/cte#C7.1">C7.1</a>
        
        
      
      </p>
    

    </header>

  <div class="post-content e-content" itemprop="articleBody">
    <ul id="toc" class="section-nav">
<li class="toc-entry toc-h2"><a href="#overview-of-steps">Overview of steps</a>
<ul>
<li class="toc-entry toc-h3"><a href="#1-installation">1. Installation</a></li>
<li class="toc-entry toc-h3"><a href="#2-for-windows-set-up-docker-with-wsl">2. (For Windows) Set up Docker with WSL</a></li>
<li class="toc-entry toc-h3"><a href="#optional-download-docker-extension-in-vscode">(Optional) Download Docker extension in VSCode</a></li>
<li class="toc-entry toc-h3"><a href="#3-using-vscode-terminal-run-make-server">3. Using VSCode Terminal, run: make server</a>
<ul>
<li class="toc-entry toc-h4"><a href="#special-steps-for-windows">Special steps for Windows</a></li>
</ul>
</li>
<li class="toc-entry toc-h3"><a href="#4-view-blog">4. View blog</a>
<ul>
<li class="toc-entry toc-h4"><a href="#add-to-gitignore">Add to .gitignore</a></li>
</ul>
</li>
<li class="toc-entry toc-h3"><a href="#resources">Resources</a></li>
</ul>
</li>
</ul><p>It’s often useful to test pages locally before deploying, as it can save time and be helpful for testing quick changes/debugging. In this blog we’ll learn how to deploy fastpages locally using Docker.</p>

<h2 id="overview-of-steps">
<a class="anchor" href="#overview-of-steps" aria-hidden="true"><span class="octicon octicon-link"></span></a>Overview of steps</h2>

<ol>
  <li>Download Docker desktop</li>
  <li>(For Windows) Set up Docker with WSL</li>
  <li>Run <code class="language-plaintext highlighter-rouge">make server</code> in repo directory</li>
  <li>Click in terminal or type localhost link show (ex. http://127.0.0.1:4000/{repo name}) to view your Fastpages Blog site.</li>
</ol>

<h3 id="1-installation">
<a class="anchor" href="#1-installation" aria-hidden="true"><span class="octicon octicon-link"></span></a>1. Installation</h3>

<p>Docker is a lightweight method to build, deploy, run, update and manage containers. Download Docker desktop from following links:</p>

<p>Windows: https://docs.docker.com/desktop/install/windows-install/
Mac: https://docs.docker.com/desktop/install/mac-install/.</p>

<p>Now, each time you want to <code class="language-plaintext highlighter-rouge">make server</code>, you need to start Docker desktop or make sure it running. Make sure you do this before building locally!</p>

<h3 id="2-for-windows-set-up-docker-with-wsl">
<a class="anchor" href="#2-for-windows-set-up-docker-with-wsl" aria-hidden="true"><span class="octicon octicon-link"></span></a>2. (For Windows) Set up Docker with WSL</h3>

<p>For Windows, to set up Docker with WSL use https://docs.docker.com/desktop/windows/wsl/.</p>

<h3 id="optional-download-docker-extension-in-vscode">
<a class="anchor" href="#optional-download-docker-extension-in-vscode" aria-hidden="true"><span class="octicon octicon-link"></span></a>(Optional) Download Docker extension in VSCode</h3>

<p>VSCode has an extension too make it easier to manage docker containers and images directly in your IDE. To download, go to the Extensions tab of VSCode (left bar, or Ctrl+Shift+X), search “Docker” and download the extension from Microsoft. You should now see a docker icon on the left bar, which you can click on to see your Docker connections.</p>

<h3 id="3-using-vscode-terminal-run-make-server">
<a class="anchor" href="#3-using-vscode-terminal-run-make-server" aria-hidden="true"><span class="octicon octicon-link"></span></a>3. Using VSCode Terminal, run: <code class="language-plaintext highlighter-rouge">make server</code>
</h3>

<p>In the local repository, make sure you are cd’ed to the base/root directory (i.e. where the Makefile is). For Ellen that was the ap-csa-fastpages directory as pictured.  For Mr M, <code class="language-plaintext highlighter-rouge">cd ~/vscode/APCSA</code> sets him in his APCSA repository, here the <code class="language-plaintext highlighter-rouge">make server</code> command will work if Docker is running.</p>

<p><img src="https://user-images.githubusercontent.com/56745453/186964001-45e37d26-45b0-484d-bac6-b85b67cb2ffb.png" alt="image"></p>

<p>The Makefile contains common aliased commands for building and serving your fastpages locally. If you look inside the file or run <code class="language-plaintext highlighter-rouge">make</code> in terminal, you can see what docker commands it can run.</p>

<p><img src="https://user-images.githubusercontent.com/56745453/186964281-4c238041-0e9e-4319-affa-5d0aebe084b3.png" alt="image"></p>

<p>Specifically, we are interested in the <code class="language-plaintext highlighter-rouge">make server</code> command, which will build the container the first time and start the Jekyll server. If you remember from APCSP, Jekyll is what powers Github pages behind the scenes. You can build your GitHub Pages site locally using Jekyll to preview and test changes to your site.</p>

<h4 id="special-steps-for-windows">
<a class="anchor" href="#special-steps-for-windows" aria-hidden="true"><span class="octicon octicon-link"></span></a>Special steps for Windows</h4>

<p>The first time, you might get this issue:</p>

<p><img src="https://user-images.githubusercontent.com/56745453/186963057-bb16c926-33f5-41cb-abe1-65886678f477.png" alt="image"></p>

<p>If that’s the case, make sure this setting is toggled on in Docker desktop settings:</p>

<p><img src="https://user-images.githubusercontent.com/56745453/186963251-602a4073-caab-40ca-8441-55be64d9c7f7.png" alt="image"></p>

<p>It should ask you to reload and if you run the command again it should work now.</p>

<h3 id="4-view-blog">
<a class="anchor" href="#4-view-blog" aria-hidden="true"><span class="octicon octicon-link"></span></a>4. View blog</h3>

<p>After running, look for link to run Server. For me, this was http://127.0.0.1:4000/{repo name}:</p>
<blockquote>
  <p>Server address: http://127.0.0.1:4000/</p>
</blockquote>

<blockquote>
  <p>Server running… press ctrl-c to stop.</p>
</blockquote>

<p><mark>Shift-click server address</mark> to launch in Browser.</p>

<p><mark>Leave the server running!!!</mark></p>

<p><mark>Make edits in VSCode and save the file</mark>.  On each save, watch terminal in VSCode to see updates and regeneration of WebSite.</p>

<p><mark>Refresh or click to Web page of change and you will see updates almost instantly</mark>.  Refer to VSCode terminal to see any error encountered when running your server.  As indicated ctrl-c will stop the server, however, I have left it running for hours of edits, testing, and commits to GitHub.</p>

<p>Alert, when you are satisfied with local changes… <mark>you must ✔️Commit and Sync to GitHub</mark>.  The local server is used to preview and test change prior to Sync.  Only after Sync, will others be able to see your changes.</p>

<p><img src="https://user-images.githubusercontent.com/56745453/186968485-a2d02d10-d53a-4b88-b6b1-bbcc2f69d1cc.png" alt="image"></p>

<h4 id="add-to-gitignore">
<a class="anchor" href="#add-to-gitignore" aria-hidden="true"><span class="octicon octicon-link"></span></a>Add to .gitignore</h4>

<p>A side effect of building locally is that it converts all the .ipynb and .docx files to .md. This means that some files will have duplicates after building – one in .ipynb or .docx, another in .md form.</p>

<p>To avoid duplicates masters when pushing to github, add the  md generated files from to the .gitignore.   This can be done by right clicking md file when preparing commits. Below is a sample .gitignore.  The 1st three lines should be universal to all fastpages projects, the other files are specific to your project.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># Ignore from local build
settings.ini
Gemfile.lock
images/copied_from_nb/
_posts/2022-08-15-AP-anatomy.md
_posts/2022-08-22-HM-anthony_and_sahil.md
_posts/2022-08-22-TT-darkmode.md
_posts/2022-08-22-AP-primitives.md
_posts/2022-08-22-TT-bash_tutorial.md
_posts/2022-08-29-AP-using_java_objects.md
_posts/2022-09-05-AP-boolean_ifs.md
_posts/2022-09-19-TT-js_tutorial.md
_posts/2022-09-26-TT-rapidapi.md
</code></pre></div></div>

<h3 id="resources">
<a class="anchor" href="#resources" aria-hidden="true"><span class="octicon octicon-link"></span></a>Resources</h3>

<p>https://github.com/fastai/fastpages/blob/master/_fastpages_docs/DEVELOPMENT.md</p>

  </div><a class="u-url" href="/APCSP/c7.1/2022/09/12/PBL-fastpages-docker.html" hidden></a>
</article>
